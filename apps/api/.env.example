# Copy to .env and fill as needed.

DATABASE_URL=postgres://agentarena:agentarena@localhost:5433/agentarena

# Optional but recommended (prod): base64-encoded key for @fastify/secure-session.
# If unset, the API uses an ephemeral in-memory key and sessions reset on restart.
# Generate: `node -e "console.log(require('node:crypto').randomBytes(32).toString('base64'))"`
SESSION_KEY_BASE64=

# Optional: enforce SIWE domain/scheme binding (recommended in prod).
# If unset, SIWE verification accepts any domain/scheme embedded in the signed message.
SIWE_DOMAIN=
SIWE_SCHEME=

# Optional: persist Yellow active session keys encrypted-at-rest (recommended for prod).
# When unset, Yellow sessions are kept in memory only (restart requires re-auth).
# Generate: `node -e "console.log(require('node:crypto').randomBytes(32).toString('base64'))"`
YELLOW_SESSION_STORE_KEY_BASE64=

# Optional: enable real LLM-backed agent decisions via Vercel AI Gateway.
# When unset, the backend falls back to the simple built-in strategies.
AI_GATEWAY_API_KEY=

# BTC price feed for match ticks:
# - simulated (default): deterministic-ish drift, good for offline/CI
# - coingecko: live BTC/USD from CoinGecko (public endpoint)
# - coinbase: live BTC/USD from Coinbase spot (public endpoint)
BTC_PRICE_FEED=simulated

# Match settings (defaults are fast for dev/tests; use larger values for demos).
MATCH_TICK_INTERVAL_MS=1500
MATCH_MAX_TICKS=40
MATCH_START_PRICE=100000

# --- Yellow / Nitrolite (optional) ---
# ClearNode WS URL (sandbox default).
YELLOW_WS_URL=wss://clearnet-sandbox.yellow.com/ws

# Auth / policy settings (used for session key auth).
YELLOW_APPLICATION=agent-arena
YELLOW_SCOPE=public
YELLOW_EXPIRES_IN_SECONDS=3600

# Default allowances requested for user session keys.
# Example from Yellow docs: ytest.usd allowance amount "1000000000" (base units).
YELLOW_ALLOWANCE_ASSET=ytest.usd
YELLOW_ALLOWANCE_AMOUNT=1000000000

# Faucet endpoint for sandbox tokens.
YELLOW_FAUCET_URL=https://clearnet-sandbox.yellow.com/faucet/requestTokens

# --- Paid matches via Yellow transfers (optional) ---
# When enabled, joining the queue collects an entry fee (off-chain transfer) and match end pays out from the house.
YELLOW_PAID_MATCHES=0
YELLOW_ENTRY_ASSET=ytest.usd
YELLOW_ENTRY_AMOUNT=10000000
YELLOW_RAKE_BPS=2000
# Optional: charge a small off-chain fee every tick (per seat) to demonstrate many session-based transfers.
# 0 disables.
YELLOW_TICK_FEE_AMOUNT=0
# If a paid-match queue doesn't fill, auto-refund entry fees after this many milliseconds (0 disables).
YELLOW_QUEUE_REFUND_MS=600000

# Server "house" wallet (custodial) used for refunds + payouts.
# MUST be a 0x-prefixed private key. Treat as a secret.
YELLOW_HOUSE_PRIVATE_KEY=
YELLOW_HOUSE_SCOPE=house
YELLOW_HOUSE_ALLOWANCE_ASSET=ytest.usd
YELLOW_HOUSE_ALLOWANCE_AMOUNT=1000000000000
YELLOW_HOUSE_EXPIRES_IN_SECONDS=86400
